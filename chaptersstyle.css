      :root {
          --primary: #0d600d;
          --accent: #6fcf6f;
          --glass: rgba(255, 255, 255, 0.08);
          --paper: #fbf9f3;
          --ink: #336c33;
          --muted: #6d7a72;
          --shadow: 0 10px 30px rgba(2, 20, 10, 0.08);
      }

      /* Layout */
      .wrap {
          max-width: 1200px;
          margin: 84px auto;
          padding: 20px;
          display: grid;
          grid-template-columns: 320px 1fr;
          gap: 28px;
          align-items: start
      }

      @media(max-width:980px) {
          .wrap {
              grid-template-columns: 1fr
          }
      }

      /* Header */
      header.sitebar {
          position: fixed;
          left: 0;
          right: 0;
          top: 0;
          height: 64px;
          display: flex;
          align-items: center;
          justify-content: space-between;
          padding: 0 20px;
          background: linear-gradient(180deg, rgba(255, 255, 255, 0.06), rgba(255, 255, 255, 0.02));
          backdrop-filter: blur(8px);
          border-bottom: 1px solid rgba(0, 0, 0, 0.04);
          z-index: 999;
          transition: background .25s, border-color .25s, box-shadow .25s;
      }

      body.dark header.sitebar {
          background: linear-gradient(180deg, rgba(0, 0, 0, 0.26), rgba(0, 0, 0, 0.08));
          border-bottom-color: rgba(255, 255, 255, 0.04)
      }

      header.sitebar.stuck {
          background: rgba(255, 255, 255, 0.95);
          box-shadow: 0 6px 18px rgba(0, 0, 0, 0.06)
      }

      body.dark header.sitebar.stuck {
          background: rgba(4, 30, 8, 0.95)
      }

      .brand {
          font-family: Poppins;
          font-weight: 700;
          color: var(--primary);
          display: flex;
          align-items: center;
          gap: 12px
      }

      .brand .logo-dot {
          width: 12px;
          height: 12px;
          border-radius: 50%;
          background: var(--accent);
          box-shadow: 0 0 18px var(--accent)
      }

      .top-controls {
          display: flex;
          align-items: center;
          gap: 12px
      }

      .toggle-btn {
          padding: 8px 12px;
          border-radius: 8px;
          border: none;
          background: var(--accent);
          color: white;
          font-weight: 700;
          cursor: pointer
      }

      .menu-toggle {
          display: none;
          border: none;
          background: transparent;
          font-size: 20px;
          cursor: pointer
      }

      @media(max-width:980px) {
          .menu-toggle {
              display: inline-block
          }

          .brand a {
              pointer-events: none
          }
      }

      /* Sidebar */
      .sidebar {
          background: linear-gradient(180deg, var(--glass), rgba(255, 255, 255, 0.01));
          border-radius: 14px;
          padding: 18px;
          border: 1px solid rgba(0, 0, 0, 0.04);
          position: relative;
          transition: all .28s;
          box-shadow: var(--shadow);
          max-height: calc(100vh - 120px);
          overflow: auto;
          backdrop-filter: blur(8px);
      }

      body.dark .sidebar {
          background: linear-gradient(180deg, rgba(0, 0, 0, 0.25), rgba(0, 0, 0, 0.10))
      }

      .sidebar h3 {
          font-family: Poppins;
          margin-bottom: 10px;
          color: var(--primary)
      }

      .chapter-topics {
          list-style: none;
          padding: 6px 0
      }

      .chapter-topics li {
          margin: 8px 0
      }

      .chapter-topics a {
          display: block;
          padding: 8px 10px;
          border-radius: 8px;
          text-decoration: none;
          color: var(--ink);
          font-weight: 600;
          background: transparent;
          transition: all .18s;
          font-family: Poppins, cursive;
      }

      .chapter-topics a:hover {
          background: linear-gradient(90deg, rgba(111, 207, 111, 0.12), rgba(11, 61, 46, 0.04));
          transform: translateX(6px);
      }

      .sidebar .resources {
          margin-top: 14px;
          padding-top: 12px;
          border-top: 1px dashed rgba(0, 0, 0, 0.03)
      }

      .sidebar .resources a {
          display: flex;
          gap: 8px;
          align-items: center;
          padding: 8px;
          border-radius: 8px;
          text-decoration: none;
          color: var(--primary);
          font-weight: 600
      }

      /* Collapse overlay (mobile) */
      .sidebar-collapsed {
          display: none
      }

      .drawer-overlay {
          position: fixed;
          inset: 0;
          background: rgba(0, 0, 0, 0.4);
          display: none;
          z-index: 998
      }

      /* Content area (paper-like columns) */
      .content {
          background: linear-gradient(180deg, rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.35));
          padding: 28px;
          border-radius: 16px;
          border: 1px solid rgba(0, 0, 0, 0.04);
          box-shadow: var(--shadow);
          font-family: "Poppins", "Patrick Hand", cursive;
          line-height: 1.6;
      }

      body.dark .content {
          background: linear-gradient(180deg, rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.14))
      }

      .chapter-header .nav {
          font-family: Inter;
          color: var(--muted);
          font-size: 13px;
          margin-bottom: 6px
      }

      .chapter-header .nav .hover:hover {
          color: var(--ink);
      }

      .chapter-header h1 {
          font-family: Poppins;
          margin-bottom: 8px;
          color: var(--primary)
      }

      /* paper-like divider */
      .paper-divider {
          height: 10px;
          background: linear-gradient(90deg, rgba(6, 61, 12, 0.03), rgba(111, 207, 111, 0.06));
          margin: 18px 0;
          border-radius: 6px;
          box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.5);
      }

      /* Section card (subtopic) */
      .subtopic {
          background: linear-gradient(180deg, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.75));
          border-radius: 12px;
          padding: 14px;
          margin-bottom: 18px;
          border-left: 6px solid var(--accent);
          transition: transform .22s, box-shadow .22s;
      }

      body.dark .subtopic {
          background: linear-gradient(180deg, rgba(5, 20, 8, 0.3), rgba(5, 20, 8, 0.22))
      }

      .subtopic:hover {
          transform: translateY(-6px);
          box-shadow: 0 14px 30px rgba(2, 20, 10, 0.06)
      }

      .subtopic h3 {
          margin-bottom: 6px
      }

      .subtopic p {
          font-size: 16px;
          color: var(--ink)
      }

      /* sticky diagram mini-card */
      .sticky-diagram {
          position: sticky;
          top: 110px;
          margin-left: -12px;
          border-radius: 12px;
          padding: 12px;
          background: var(--glass);
          border: 1px solid rgba(0, 0, 0, 0.04);
          max-width: 320px;
          box-shadow: var(--shadow);
          display: flex;
          flex-direction: column;
          gap: 8px;
          align-items: center;
      }

      .sticky-diagram img {
          width: 100%;
          border-radius: 10px
      }

      @media(max-width:980px) {
          .sticky-diagram {
              position: relative;
              top: auto;
              max-width: none;
              margin: 12px 0
          }
      }

      /* diagram grid inside content */
      .diagram-row {
          display: grid;
          grid-template-columns: 1fr 320px;
          gap: 20px;
          align-items: start;
      }

      @media(max-width:980px) {
          .diagram-row {
              grid-template-columns: 1fr
          }
      }

      /* popup preview */
      .preview-bg {
          position: fixed;
          inset: 0;
          display: none;
          align-items: center;
          justify-content: center;
          background: rgba(6, 10, 6, 0.6);
          backdrop-filter: blur(10px);
          z-index: 9999;
      }

      .preview-card {
          max-width: 980px;
          width: 92%;
          border-radius: 16px;
          overflow: hidden;
          box-shadow: 0 30px 80px rgba(0, 0, 0, 0.5);
          animation: popIn .28s ease;
      }

      .preview-card img {
          width: 100%;
          height: auto;
          display: block
      }

      .preview-actions {
          display: flex;
          gap: 12px;
          padding: 12px;
          background: linear-gradient(90deg, rgba(0, 0, 0, 0.02), rgba(0, 0, 0, 0.01))
      }

      .btn {
          padding: 9px 14px;
          border-radius: 10px;
          border: none;
          cursor: pointer;
          font-weight: 700
      }

      .btn.ghost {
          background: transparent;
          border: 1px solid rgba(255, 255, 255, 0.12)
      }

      .btn.primary {
          background: var(--accent);
          color: white
      }

      @keyframes popIn {
          from {
              transform: scale(.94);
              opacity: 0
          }

          to {
              transform: scale(1);
              opacity: 1
          }
      }

      /* small helpers */
      .muted {
          color: var(--muted);
          font-size: 0.95rem
      }

      .note {
          font-size: 15px;
          color: var(--muted);
          margin-top: 8px
      }

      /* small floating animation for cards */
      .float-anim {
          animation: floatUp .9s cubic-bezier(.2, .9, .2, 1) forwards
      }

      @keyframes floatUp {
          from {
              transform: translateY(18px);
              opacity: 0
          }

          to {
              transform: translateY(0);
              opacity: 1
          }
      }

      /* Hidden Scrolling effect in chapter list */

      .chapter-list-scroll {
          max-height: 500px;
          overflow-y: auto;

          -ms-overflow-style: none;
          /* IE and Edge */
          scrollbar-width: none;
          /* Firefox */
      }

      .chapter-list-scroll::-webkit-scrollbar {
          width: 0;
          height: 0;
          background: transparent;
      }

      /* Tables style */
      .styled-table {
          width: 100%;
          border-collapse: collapse;
          margin: 16px 0;
          font-size: 16px;
          text-align: left;
      }

      .styled-table thead tr {
          background-color: var(--accent);
          color: white;
          text-align: left;
      }

      .styled-table th,
      .styled-table td {
          padding: 12px 15px;
          border: 1px solid rgba(0, 0, 0, 0.1);
      }

      .styled-table tbody tr:nth-child(even) {
          background-color: rgba(111, 207, 111, 0.1);
      }

      .styled-table tbody tr:hover {
          background-color: rgba(111, 207, 111, 0.2);
      }

      /* Chapter navigation links */
      .chapter-nav a {
          text-decoration: none;
          color: var(--text-color, #000);
          /* Default to black for light mode */
          transition: all 0.3s ease;
      }

      .chapter-nav:hover a {
          color: var(--hover-text-color, #fff);
          /* Default to white for hover */
          background-color: var(--hover-bg-color, #00d404);
          /* Default to blue for hover */
          padding: 10px 20px;
          border-radius: 8px;
      }

      body.light .chapter-nav a {
          --text-color: #000;
          --hover-text-color: #fff;
          --hover-bg-color: #0d8a04;
      }

      body.dark .chapter-nav a {
          --text-color: #fff;
          --hover-text-color: #000;
          --hover-bg-color: #00ff0d;
      }

      body.light .chapter-nav:hover a {
          --text-color: #000;
          --hover-text-color: #fff;
          --hover-bg-color: #0d8a04;
      }

      body.dark .chapter-nav:hover a {
          --text-color: #fff;
          --hover-text-color: #000;
          --hover-bg-color: #00ff0d;
      }

      /* .btn-primary styling */
      .btn.primary {
          text-decoration: none;
          color: var(--text-color, #000);
          transition: all 0.3s ease;
          padding: 6px 10px;
          border-radius: 4px;
          align-items: center;
      }

      .btn.primary:hover {
          color: var(--hover-text-color, #fff);
          background-color: var(--hover-bg-color, #15ff00);
          transform: scale(1.1) translateX(7px);
      }

      body.light .btn.primary {
          --text-color: #000;
          --hover-text-color: #fff;
          --hover-bg-color: #13bb03;
      }

      body.dark .btn.primary {
          --text-color: #fff;
          --hover-text-color: #000;
          --hover-bg-color: #05c91f;
      }