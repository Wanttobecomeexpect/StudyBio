<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>StudyBio ‚Äî 3D Diagrams (Official Style)</title>

    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Poppins:wght@500;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="globalstyle.css">
    <style>
        /* ===== Theme tokens (StudyBio style) ===== */
        :root {
            --primary: #0b3d0b;
            /* deep green */
            --accent: #6fcf6f;
            /* bright green */
            --glass: rgba(255, 255, 255, 0.06);
            --glass-strong: rgba(255, 255, 255, 0.12);
            --muted: #7b8b7b;
            --card-radius: 16px;
            --card-padding: 16px;
            --shadow: 0 8px 30px rgba(6, 45, 12, 0.08);
            --max-width: 1200px;
        }

       

        /* ===== Hero ===== */
        .hero {
            display: flex;
            align-items: center;
            gap: 20px;
            padding: 28px 0
        }

        .hero h1 {
            font-family: Poppins;
            font-size: 32px;
            margin: 0
        }

        .hero p {
            color: var(--muted);
            margin: 0
        }

        /* ===== Controls row ===== */
        .controls {
            display: flex;
            gap: 12px;
            margin: 18px 0;
            align-items: center
        }

        .search {
            flex: 1;
            min-width: 180px
        }

        .search input {
            width: 100%;
            padding: 12px;
            border-radius: 12px;
            border: 1px solid rgba(0, 0, 0, 0.05);
            background: transparent
        }

        .filter {
            display: flex;
            gap: 8px
        }

        .chip {
            padding: 8px 12px;
            border-radius: 999px;
            background: var(--glass);
            cursor: pointer;
            font-weight: 600
        }

        .chip.active {
            box-shadow: 0 6px 20px rgba(11, 61, 46, 0.08);
        }

        /* ===== Chapters grid ===== */
        .chapters {
            display: grid;
            grid-template-columns: 1fr 340px;
            gap: 28px
        }

        @media(max-width:980px) {
            .chapters {
                grid-template-columns: 1fr
            }
        }

        .gallery {
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.03), rgba(255, 255, 255, 0.01));
            padding: 18px;
            border-radius: 14px
        }

        .chapter-block {
            margin-bottom: 28px
        }

        .chapter-title {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 12px
        }

        .chapter-title h3 {
            margin: 0;
            font-family: Poppins
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 16px
        }

        .card {
            border-radius: 14px;
            padding: 12px;
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.04), rgba(255, 255, 255, 0.02));
            backdrop-filter: blur(8px);
            cursor: pointer;
            border: 1px solid rgba(255, 255, 255, 0.04);
            transition: transform .25s, box-shadow .25s;
            display: flex;
            flex-direction: column
        }

        body.dark .card {
            background: linear-gradient(180deg, rgba(0, 0, 0, 0.28), rgba(0, 0, 0, 0.16));
            border-color: rgba(255, 255, 255, 0.04)
        }

        .card:hover {
            transform: translateY(-8px);
            box-shadow: 0 18px 40px rgba(6, 45, 12, 0.12)
        }

        .thumb {
            height: 140px;
            border-radius: 10px;
            overflow: hidden;
            display: block
        }

        .thumb img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block
        }

        .meta {
            padding-top: 10px;
            display: flex;
            align-items: center;
            justify-content: space-between
        }

        .meta .name {
            font-weight: 700
        }

        .meta .tag {
            font-size: 12px;
            color: var(--muted)
        }

        /* ===== Sidebar (chapter index) ===== */
        .sidebar {
            position: relative
        }

        .side-card {
            padding: 14px;
            border-radius: 12px;
            background: var(--glass);
            backdrop-filter: blur(8px)
        }

        .side-card h4 {
            margin: 0 0 12px 0;
            font-family: Poppins
        }

        .side-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
            max-height: 520px;
            overflow: auto;
            padding-right: 6px
        }

        .side-list button {
            background: transparent;
            border: none;
            text-align: left;
            padding: 10px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600
        }

        .side-list button:hover {
            background: var(--glass-strong)
        }

        .side-list button.active {
            background: linear-gradient(90deg, var(--accent), #0b6a44);
            color: white
        }

        /* custom scrollbar small */
        .side-list::-webkit-scrollbar {
            width: 8px
        }

        .side-list::-webkit-scrollbar-thumb {
            background: rgba(0, 0, 0, 0.12);
            border-radius: 8px
        }

        /* ===== Popup preview ===== */
        .preview-bg {
            position: fixed;
            inset: 0;
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1400
        }

        .preview-bg.show {
            display: flex
        }

        /* subtle layered blur + vignette */
        .preview-bg::before {
            content: "";
            position: absolute;
            inset: 0;
            background: rgba(2, 8, 2, 0.46);
            backdrop-filter: blur(10px);
        }

        .preview-card {
            position: relative;
            max-width: 1100px;
            width: calc(100% - 48px);
            max-height: 86vh;
            border-radius: 16px;
            overflow: hidden;
            display: flex;
            gap: 16px;
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.96), rgba(245, 255, 245, 0.95));
            box-shadow: 0 30px 60px rgba(2, 10, 6, 0.6);
            transform: translateY(12px);
            opacity: 0;
            transition: transform .28s, opacity .28s
        }

        body.dark .preview-card {
            background: linear-gradient(180deg, rgba(2, 16, 6, 0.86), rgba(3, 28, 11, 0.9));
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.6)
        }

        .preview-card.show {
            transform: translateY(0);
            opacity: 1
        }

        .preview-left {
            flex: 1;
            background: #000;
            display: flex;
            align-items: center;
            justify-content: center
        }

        .preview-left img {
            max-width: 100%;
            max-height: 82vh;
            display: block
        }

        .preview-side {
            width: 360px;
            padding: 18px;
            display: flex;
            flex-direction: column;
            gap: 12px;
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.98), rgba(255, 255, 255, 0.96))
        }

        body.dark .preview-side {
            background: transparent
        }

        .preview-side h3 {
            margin: 0;
            font-family: Poppins
        }

        .preview-side p {
            color: var(--muted);
            margin: 0
        }

        .preview-actions {
            margin-top: auto;
            display: flex;
            gap: 10px
        }

        .btn-ghost {
            padding: 10px 14px;
            border-radius: 10px;
            border: 1px solid rgba(0, 0, 0, 0.06);
            background: transparent;
            cursor: pointer
        }

        .btn-primary {
            padding: 10px 14px;
            border-radius: 10px;
            background: var(--accent);
            color: white;
            border: none;
            cursor: pointer
        }

        .preview-close {
            position: absolute;
            right: 12px;
            top: 12px;
            background: transparent;
            border: none;
            font-weight: 800;
            font-size: 18px;
            color: var(--muted);
            cursor: pointer
        }

        /* keyboard nav hints */
        .hint {
            font-size: 12px;
            color: var(--muted)
        }

        /* small responsive fixes */
        @media(max-width:820px) {
            .preview-side {
                display: none
            }

            .preview-card {
                width: 92%;
                max-width: 760px
            }
        }

        /* subtle entrance animations for cards */
        .card {
            opacity: 0;
            transform: translateY(12px);
            animation: cardIn .45s ease forwards
        }

        .card:nth-child(1) {
            animation-delay: .05s
        }

        .card:nth-child(2) {
            animation-delay: .08s
        }

        .card:nth-child(3) {
            animation-delay: .11s
        }

        @keyframes cardIn {
            to {
                opacity: 1;
                transform: none
            }
        }
    </style>
</head>

<body class="light">

    <!-- Loader -->
    <div id="loader" aria-hidden="false">
        <div class="book-loader" role="status" aria-live="polite">
            <div class="book" aria-hidden="true">
                <div class="cover cover-left"></div>
                <div class="pages">
                    <div class="page"></div>
                    <div class="page"></div>
                    <div class="page"></div>
                </div>
                <div class="cover cover-right"></div>
            </div>
            <p class="loading-text">Loading Chapters-List...</p>
        </div>
    </div>

    <!-- Floating shapes -->
    <div class="floating-shape shape1" aria-hidden="true"></div>
    <div class="floating-shape shape2" aria-hidden="true"></div>
    <div class="floating-shape shape3" aria-hidden="true"></div>
    <div class="bio-dna floating-shape" aria-hidden="true">üß¨</div>
    <div class="bio-microscope floating-shape" aria-hidden="true">üî¨</div>
    <div class="bio-leaf floating-shape" aria-hidden="true">üçÉ</div>
    <div class="bio-cell floating-shape" aria-hidden="true">ü¶†</div>

    <!-- SITE CONTENT (sections removed) -->
    <div id="site-content">

        <!-- Header (with small image logo placeholder) -->
        <header class="scroll-reveal">
            <div class="logo">
                <a href="index.html">StudyBio</a>
            </div>

            <div class="nav-links">
                <a href="index.html">Home</a>
                <a href="resources.html">Resources</a>
                <a href="quizzes.html">Quizzes</a>
                <a href="about.html">About</a>
            </div>

            <button class="toggle-btn" id="theme-toggle" aria-pressed="false">Dark Mode</button>
        </header>

        <main class="wrap" role="main">

            <section class="hero">
                <div>
                    <h1>Interactive 3D Diagrams ‚Äî Chapter-wise</h1>
                    <p>Preview, open and study high-quality 3D diagrams. Click any tile to open a blur-backed preview.
                        Works
                        in light & dark mode.</p>
                </div>
            </section>

            <div class="controls">
                <div class="search"><input id="searchInput" type="search"
                        placeholder="Search diagrams or chapters ‚Äî e.g. cell, photosynthesis"
                        aria-label="Search diagrams">
                </div>
                <div class="filter">
                    <div class="chip active" data-filter="all">All</div>
                    <div class="chip" data-filter="botany">Botany</div>
                    <div class="chip" data-filter="zoology">Zoology</div>
                    <div class="chip" data-filter="cell">Cell</div>
                </div>
            </div>

            <div class="chapters">

                <section class="gallery" aria-label="Diagrams gallery">

                    <!-- Chapter blocks (example list) -->
                    <div class="chapter-block" data-chapter="Botany: Cell" data-type="botany">
                        <div class="chapter-title">
                            <h3>üìò Botany ‚Äî Cell & Tissues</h3>
                        </div>
                        <div class="grid" id="grid-1">
                            <!-- Using local uploaded file paths as placeholders (will be transformed by your tooling) -->
                            <article class="card" data-src="/mnt/data/f44ad762-2f62-4dfe-a4ad-5529c6d38547.png"
                                data-title="3D Plant Cell"
                                data-desc="High-detail plant cell model: chloroplasts, vacuole, cell wall."
                                data-tags="botany,cell">
                                <div class="thumb"><img src="/mnt/data/f44ad762-2f62-4dfe-a4ad-5529c6d38547.png"
                                        alt="Plant cell thumbnail"></div>
                                <div class="meta">
                                    <div class="name">3D Plant Cell</div>
                                    <div class="tag">Botany</div>
                                </div>
                            </article>

                            <article class="card" data-src="/mnt/data/c1e864a8-0266-42fe-8deb-cc7b86ffd7b8.png"
                                data-title="3D Leaf Cell"
                                data-desc="Cross-section of leaf cell ‚Äî stomata, mesophyll, chloroplasts."
                                data-tags="botany,cell">
                                <div class="thumb"><img src="/mnt/data/c1e864a8-0266-42fe-8deb-cc7b86ffd7b8.png"
                                        alt="Leaf cell thumbnail"></div>
                                <div class="meta">
                                    <div class="name">3D Leaf Cell</div>
                                    <div class="tag">Botany</div>
                                </div>
                            </article>

                            <article class="card" data-src="/mnt/data/f44ad762-2f62-4dfe-a4ad-5529c6d38547.png"
                                data-title="3D Chloroplast"
                                data-desc="Rotatable chloroplast model showing thylakoid stacks."
                                data-tags="botany,photosynthesis">
                                <div class="thumb"><img src="/mnt/data/f44ad762-2f62-4dfe-a4ad-5529c6d38547.png"
                                        alt="Chloroplast"></div>
                                <div class="meta">
                                    <div class="name">3D Chloroplast</div>
                                    <div class="tag">Photosynthesis</div>
                                </div>
                            </article>

                        </div>
                    </div>

                    <div class="chapter-block" data-chapter="Zoology ‚Äî Systems" data-type="zoology">
                        <div class="chapter-title">
                            <h3>üß¨ Zoology ‚Äî Systems & Organs</h3>
                        </div>
                        <div class="grid" id="grid-2">

                            <article class="card" data-src="/mnt/data/c1e864a8-0266-42fe-8deb-cc7b86ffd7b8.png"
                                data-title="3D Neuron" data-desc="Neuron model with dendrites, axon, synapses."
                                data-tags="zoology,neuron">
                                <div class="thumb"><img src="/mnt/data/c1e864a8-0266-42fe-8deb-cc7b86ffd7b8.png"
                                        alt="Neuron"></div>
                                <div class="meta">
                                    <div class="name">3D Neuron</div>
                                    <div class="tag">Zoology</div>
                                </div>
                            </article>

                            <article class="card" data-src="/mnt/data/f44ad762-2f62-4dfe-a4ad-5529c6d38547.png"
                                data-title="3D Heart" data-desc="Anatomical heart model ‚Äî chambers & valves."
                                data-tags="zoology,cardio">
                                <div class="thumb"><img src="/mnt/data/f44ad762-2f62-4dfe-a4ad-5529c6d38547.png"
                                        alt="Heart"></div>
                                <div class="meta">
                                    <div class="name">3D Heart</div>
                                    <div class="tag">Circulation</div>
                                </div>
                            </article>

                        </div>
                    </div>

                </section>

                <aside class="sidebar">
                    <div class="side-card">
                        <h4>Chapters / Filters</h4>
                        <div class="side-list" id="chapterIndex">
                            <!-- populated by JS -->
                        </div>
                    </div>
                </aside>

            </div>

        </main>

        <!-- Preview Overlay -->
        <div class="preview-bg" id="previewBg" aria-hidden="true">
            <div class="preview-card" id="previewCard" role="dialog" aria-modal="true">
                <button class="preview-close" id="previewClose" aria-label="Close preview">‚úï</button>
                <div class="preview-left">
                    <img id="previewImg" src="" alt="Preview image" />
                </div>
                <div class="preview-side">
                    <h3 id="previewTitle"></h3>
                    <p id="previewDesc"></p>
                    <div class="hint">Tip: Click outside or press ESC to close. Use arrow keys for next/prev.</div>
                    <div class="preview-actions">
                        <button class="btn-ghost" id="prevBtn">‚óÄ Prev</button>
                        <button class="btn-ghost" id="nextBtn">Next ‚ñ∂</button>
                        <button class="btn-primary" id="openFullBtn">Open Full</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Footer -->
        <footer>
            &copy; 2025 StudyBio ‚Äî Unlocking the Secrets of Life
        </footer>
    </div>
    <script src="globalnext.js"></script>
    <script>
        // Theme toggle
        const body = document.body;
        const themeToggle = document.getElementById('themeToggle');
        themeToggle.addEventListener('click', () => {
            body.classList.toggle('dark');
            body.classList.toggle('light');
            themeToggle.textContent = body.classList.contains('dark') ? 'Light Mode' : 'Dark Mode';
        });

        // Build chapter index (sidebar) from cards
        const cards = Array.from(document.querySelectorAll('.card'));
        const chapterIndex = document.getElementById('chapterIndex');
        const seenChapters = new Map();

        cards.forEach((c, i) => {
            const chapter = c.closest('.chapter-block').dataset.chapter;
            if (!seenChapters.has(chapter)) seenChapters.set(chapter, []);
            seenChapters.get(chapter).push({ el: c, index: i });
        });

        // populate sidebar
        let idx = 0;
        seenChapters.forEach((items, chapter) => {
            const btn = document.createElement('button');
            btn.textContent = chapter;
            btn.addEventListener('click', () => {
                // scroll to first card of that chapter
                items[0].el.scrollIntoView({ behavior: 'smooth', block: 'center' });
                // highlight briefly
                items[0].el.animate([{ boxShadow: '0 0 0 rgba(0,0,0,0)' }, { boxShadow: '0 20px 60px rgba(11,61,46,0.12)' }], { duration: 600, fill: 'forwards' });
            });
            chapterIndex.appendChild(btn);
            idx++;
        });

        // Search & filter
        const searchInput = document.getElementById('searchInput');
        const chips = Array.from(document.querySelectorAll('.chip'));

        function applyFilter() {
            const q = searchInput.value.trim().toLowerCase();
            const active = chips.find(c => c.classList.contains('active'))?.dataset.filter || 'all';

            cards.forEach(c => {
                const title = c.dataset.title.toLowerCase();
                const desc = c.dataset.desc.toLowerCase();
                const tags = c.dataset.tags.toLowerCase();
                const chapter = c.closest('.chapter-block').dataset.chapter.toLowerCase();

                const matchesQuery = !q || title.includes(q) || desc.includes(q) || tags.includes(q) || chapter.includes(q);
                const matchesFilter = active === 'all' || tags.includes(active) || chapter.includes(active);

                c.style.display = (matchesQuery && matchesFilter) ? '' : 'none';
            });
        }

        searchInput.addEventListener('input', applyFilter);
        chips.forEach(ch => {
            ch.addEventListener('click', () => {
                chips.forEach(x => x.classList.remove('active'));
                ch.classList.add('active');
                applyFilter();
            });
        });

        // Preview logic (blur background + keyboard nav)
        const previewBg = document.getElementById('previewBg');
        const previewCard = document.getElementById('previewCard');
        const previewImg = document.getElementById('previewImg');
        const previewTitle = document.getElementById('previewTitle');
        const previewDesc = document.getElementById('previewDesc');
        const previewClose = document.getElementById('previewClose');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const openFullBtn = document.getElementById('openFullBtn');

        let visibleIndex = -1;
        const visibleCards = () => Array.from(document.querySelectorAll('.card')).filter(c => c.style.display !== 'none');

        function showPreview(i) {
            const list = visibleCards();
            if (list.length === 0) return;
            if (i < 0) i = list.length - 1;
            if (i >= list.length) i = 0;
            visibleIndex = i;
            const card = list[i];
            const src = card.dataset.src;
            previewImg.src = src;
            previewTitle.textContent = card.dataset.title;
            previewDesc.textContent = card.dataset.desc;
            previewBg.classList.add('show');
            previewCard.classList.add('show');
            previewBg.setAttribute('aria-hidden', 'false');
        }

        function hidePreview() {
            previewBg.classList.remove('show');
            previewCard.classList.remove('show');
            previewBg.setAttribute('aria-hidden', 'true');
            // clear img to stop playing heavy resources
            previewImg.removeAttribute('src');
            visibleIndex = -1;
        }

        // open on card click
        cards.forEach((c, i) => {
            c.addEventListener('click', () => {
                const visible = visibleCards();
                const index = visible.indexOf(c);
                showPreview(index);
            });
        });

        previewBg.addEventListener('click', hidePreview);
        previewClose.addEventListener('click', hidePreview);

        prevBtn.addEventListener('click', () => { showPreview(visibleIndex - 1); });
        nextBtn.addEventListener('click', () => { showPreview(visibleIndex + 1); });
        openFullBtn.addEventListener('click', () => {
            if (visibleIndex < 0) return; const list = visibleCards(); const url = list[visibleIndex].dataset.src; window.open(url, '_blank');
        });

        // keyboard nav
        document.addEventListener('keydown', (e) => {
            if (previewBg.classList.contains('show')) {
                if (e.key === 'Escape') hidePreview();
                if (e.key === 'ArrowLeft') showPreview(visibleIndex - 1);
                if (e.key === 'ArrowRight') showPreview(visibleIndex + 1);
            }
        });

        // init default visibility
        document.addEventListener('DOMContentLoaded', () => {
            // ensure body has a mode
            if (!body.classList.contains('dark')) body.classList.add('light');

            // small reveal of cards (stagger already done via CSS nth-child)
            // make sure loader (if any) reveals the site - this file assumes loader handled globally

        });

    </script>

</body>

</html>